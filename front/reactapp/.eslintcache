[{"/usr/src/app/reactapp/src/index.js":"1","/usr/src/app/reactapp/src/App.js":"2","/usr/src/app/reactapp/src/components/Data.js":"3","/usr/src/app/reactapp/src/apis/local_url.js":"4","/usr/src/app/reactapp/src/components/FormTodo.js":"5","/usr/src/app/reactapp/src/components/firebase.js":"6","/usr/src/app/reactapp/src/components/FileTest.js":"7","/usr/src/app/reactapp/src/test_js/Home.js":"8","/usr/src/app/reactapp/src/test_js/About.js":"9","/usr/src/app/reactapp/src/test_js/RootTest.js":"10","/usr/src/app/reactapp/src/apis/Test.js":"11","/usr/src/app/reactapp/src/login_js/UserLog.js":"12"},{"size":170,"mtime":1619095537000,"results":"13","hashOfConfig":"14"},{"size":6156,"mtime":1621945931000,"results":"15","hashOfConfig":"14"},{"size":1797,"mtime":1620040359000,"results":"16","hashOfConfig":"14"},{"size":345,"mtime":1619091178000,"results":"17","hashOfConfig":"14"},{"size":5779,"mtime":1620820954000,"results":"18","hashOfConfig":"14"},{"size":686,"mtime":1619944794000,"results":"19","hashOfConfig":"14"},{"size":1844,"mtime":1620820809000,"results":"20","hashOfConfig":"14"},{"size":201,"mtime":1620823222000,"results":"21","hashOfConfig":"14"},{"size":202,"mtime":1620822879000,"results":"22","hashOfConfig":"14"},{"size":636,"mtime":1622333542000,"results":"23","hashOfConfig":"14"},{"size":812,"mtime":1622105517000,"results":"24","hashOfConfig":"14"},{"size":6442,"mtime":1622334279000,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"1j6bv97",{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"31","messages":"32","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"34"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"37","messages":"38","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"40"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"49"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"54","messages":"55","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56"},"/usr/src/app/reactapp/src/index.js",[],["57","58"],"/usr/src/app/reactapp/src/App.js",[],"/usr/src/app/reactapp/src/components/Data.js",["59"],"import React, { useState } from \"react\";\nimport axios from 'axios';\nimport firebase, { storage } from \"./firebase\";\n\nfunction Data(props) {\n  const info = props.info.map(list => {\n    return (\n      <DataItem\n        key={list.id}\n        list={list}\n        EditForm={props.EditForm}\n      />\n    );\n  });\n  return (\n    //投稿がない時の出力\n    <div>\n      {props.info.length ? info : <p>Nothing to do!</p>}\n    </div>\n  );\n}\n\nfunction DataItem(props) {\n  const [imageUrl, setImageUrl] = useState(\"\");\n\n    storage\n      .ref(\"images\")\n      .child(props.list.image_name)\n      .getDownloadURL()\n      .then(fireBaseUrl => {\n        setImageUrl(fireBaseUrl);\n    });\n\n\n  return (\n    <div className=\"div_item\">\n      <p>{props.list.id}</p>\n      <p><a href={props.list.id}>{props.list.name}</a></p>\n      <p>{props.list.contents}</p>\n      <img alt=\"投稿画像\" width=\"400\" height=\"250\" src={imageUrl}/>\n      <p>{props.list.created_at}</p>\n      <button type=\"submit\"onClick={(e) => DataDelete(props.list.id)}>削除</button> \n      <button type=\"submit\"onClick={(e) => props.EditForm(props.list.id)}>編集</button> \n    </div>\n  );\n}\n\nfunction DataDelete(id) {\n  const d_url = \"http://localhost/delete/\" + id;\n  // const d_url = \"http://localhost/post_test\";\n  // const d_url = \"http://localhost/test\";\n  const item = [\"KD\", \"ddd\", 1111, \"fahbflkhbk;arbjgbg;jog;ber\", \"imagedata\"]; \n  // console.log(d_url);\n  if(window.confirm('削除してよろしいですか？')){\n\n    axios({\n      method : \"POST\",\n      url : d_url,\n      data: item\n    })\n    .then((response)=> {\n      console.log(response);\n    })\n    .catch((error)=> {\n      console.info(error);\n    });\n\n    return window.confirm('削除されました。');\n  } else {\n    return;\n  }\n}\n\nexport default Data;\n\n\n\n\n\n\n",["60","61"],"/usr/src/app/reactapp/src/apis/local_url.js",[],"/usr/src/app/reactapp/src/components/FormTodo.js",["62"],"import React from \"react\";\nimport axios from 'axios';\nimport firebase, { storage } from \"./firebase\";\n\nfunction FormTodo(props) {\n  // console.log(props);\n  // console.log(props.imageData);\n  // console.log(props.imageFile);\n\n  /// imageFile 中身 file[0];\n\n  const imageData = props.imageData\n  let preview = ''\n  if(imageData != null) {\n      preview = (\n          <div>\n          <img alt=\"投稿画像\" width=\"400\" height=\"250\" src={imageData}/>\n          </div>\n      )\n  }\n  // name[0] contents[1] pas_wd[2] image_name[3] imageData\n  let post_item = [props.item_name, props.item_contents, props.item_pas, props.imageFile, props.imageData]\n\n  //投稿時のフォーム\n  if (props.form_mod === 0) {\n    return (\n      <div>\n        {preview}\n          <div>\n            <label className=\"formLavel\">名前</label>\n            <input name=\"name\" type=\"text\" value={props.item_name} onChange={props.updateItemName} />\n          </div>\n          <div>\n            <label className=\"formLavel\">本文</label>\n            <textarea name=\"contents\" onChange={props.updateItemContents} rows=\"4\" value={props.item_contents}/>\n          </div>\n\n          <div>\n            <label className=\"formLavel\">画像・動画</label>\n            <input type=\"file\" name=\"upimg\" onChange={(e) => props.onFileChange(e)}/>\n          </div>\n          \n          <div>\n            <label className=\"formLavel\">パスワード（4桁以上 数字）</label>\n            <input name=\"pas\" type=\"text\" value={props.item_pas} onChange={props.updateItemPas} />\n          </div>\n          <div>\n            <button type=\"submit\" onClick={(e) => PostData(post_item, props)}>投稿</button> \n          </div>\n      </div>\n    );\n  }\n\n  //編集時のフォーム\n  if (props.form_mod === 1) {\n    return (\n      <div>\n        <div>\n          <label className=\"formLavel\">名前</label>\n          <input type=\"text\" value={props.item_name_e} onChange={props.updateItemName} />\n        </div>\n        <div>\n          <label className=\"formLavel\">本文</label>\n          <textarea onChange={props.updateItemContents} rows=\"4\" value={props.item_contents_e}/>\n        </div>\n        <div>\n          <label className=\"formLavel\">パスワード（4桁以上 数字）</label>\n          <input type=\"text\" value={props.item_pas_e} onChange={props.updateItemPas} />\n        </div>\n        <div>\n          <input type=\"hidden\" value={props.item_id}/>\n          <button type=\"submit\" onClick={(e) => updateData(props)}>編集</button> \n          <button type=\"submit\" onClick={props.formModReturn}>キャンセル</button> \n        </div>\n      </div>\n    );\n  }\n\n}\n\nfunction PostData(item,props) {\n  const post_url = \"http://localhost/test\";\n  // console.log(item[3]);\n  const image_file = item[3];\n  // console.log(image_file.name);\n\n  const items = [item[0], item[1], item[2], image_file.name]\n  if(!window.confirm('投稿しますか？')){\n    return;\n  }else {\n    if (items[0] === \"\") {\n    return window.confirm('名前は必須項目です。')\n    }\n    if (items[1] === \"\") {\n      return window.confirm('本文は必須項目です。')\n    }\n    if (items[2] === \"\") {\n      return window.confirm('パスワードは必須項目です。')\n    }\n    if (items[2].length <= 3) {\n      return window.confirm('パスワードは4桁以上数字のみです。')\n    }\n    //画像Firebaseに保存\n    // const uploadTask = storage.ref(`/images/${image_file.name}`).put(image_file);\n    // uploadTask.on(\n    //   firebase.storage.TaskEvent.STATE_CHANGED\n    // );\n\n    imagePush(image_file);\n\n\n\n    axios({\n      method : \"POST\",\n      url : post_url,\n      data : items\n    })\n    .then((response)=> {\n      // console.log(response.data);\n    })\n    .catch((error)=> {\n      console.info(error);\n    });\n    return props.formModReturn();\n  }\n}\n\n//編集保存\nfunction updateData(props) {\n  const item = [props.item_id, props.item_name_e, props.item_contents_e, props.item_pas_e];\n  // console.log(item);\n  const updata_url = \"http://localhost/update\";\n  if(!window.confirm('編集しますか？')){\n    return;\n  }else {\n    if (item[1] === \"\") {\n    return window.confirm('名前は必須項目です。')\n    }\n    if (item[2] === \"\") {\n      return window.confirm('本文は必須項目です。')\n    }\n    if (item[3] === \"\") {\n      return window.confirm('パスワードは必須項目です。')\n    }\n    if (item[3].length <= 3) {\n      return window.confirm('パスワードは4桁以上数字のみです。')\n    }\n    axios({\n      method : \"POST\",\n      url : updata_url,\n      data : item\n    })\n    .then((response)=> {\n      // console.log(response);\n    })\n    .catch((error)=> {\n      console.info(error);\n    });\n    return props.formModReturn();\n  }\n}\n\n//画像保存Firebase\nfunction imagePush(image) {\n  storage.ref(`/images/${image.name}`).put(image);\n  \n  // if (image === \"\") {\n  //   console.log(\"ファイルが選択されていません\");\n  // }\n  // // アップロード処理\n  // const uploadTask = storage.ref(`/images/${image.name}`).put(image);\n  // uploadTask.on(\n  //   firebase.storage.TaskEvent.STATE_CHANGED,\n  //   next,\n  //   error,\n  //   complete\n  // );\n\n  // const next = snapshot => {\n  //   // 進行中のsnapshotを得る\n  //   // アップロードの進行度を表示\n  //   const percent = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n  //   console.log(percent + \"% done\");\n  //   console.log(snapshot);\n  // };\n  // const error = error => {\n  //   // エラーハンドリング\n  //   console.log(error);\n  // };\n  // const complete = () => {\n  //   // 完了後の処理\n  //   // 画像表示のため、アップロードした画像のURLを取得\n  //   console.log(\"upload OK\");\n  // };\n\n}\n\n\nexport default FormTodo;",["63","64"],"/usr/src/app/reactapp/src/components/firebase.js",[],"/usr/src/app/reactapp/src/components/FileTest.js",[],"/usr/src/app/reactapp/src/test_js/Home.js",[],"/usr/src/app/reactapp/src/test_js/About.js",[],["65","66"],"/usr/src/app/reactapp/src/test_js/RootTest.js",[],"/usr/src/app/reactapp/src/apis/Test.js",["67","68","69"],"/usr/src/app/reactapp/src/login_js/UserLog.js",["70","71"],"import axios from 'axios';\nimport React from 'react';\n\n\nfunction PostUser(props) {\n  const index = props.signup_email.indexOf(\"@\");\n  let user_id = props.signup_email.substring(0, index);\n  user_id = user_id+Math.random().toString(36).slice(-4);\n  let randamId = Math.random().toString(36).slice(-10);\n  randamId = randamId + Math.random().toString(36).slice(-10);\n  const item = [props.signup_name, props.signup_email, props.signup_password, user_id, randamId];\n  console.log(item);\n\n  const method = \"POST\";\n  if(!window.confirm('登録しますか？')){\n    return;\n  }else {\n    if (item[0] === \"\") {\n    return window.confirm('名前は必須項目です。')\n    }\n    if (item[1] === \"\") {\n      return window.confirm('メールは必須項目です。')\n    }\n    if (item[2] === \"\") {\n      return window.confirm('パスワードは必須項目です。')\n    }\n    if (item[2].length <= 7) {\n      return window.confirm('パスワードは英数字8桁以上です。')\n    }\n    //user登録\n    axios({\n      method : \"POST\",\n      url : \"http://localhost/new_user\",\n      data : item\n    })\n    .then((response)=> {\n      // console.log(response.data);\n    })\n    .catch((error)=> {\n      console.info(error);\n    });\n    // formリセット\n\n    //承認メール送信\n    axios({\n      method : \"POST\",\n      url : \"http://localhost/mail_post\",\n      data : item\n    })\n    .then((response)=> {\n      console.log(response.data);\n    })\n    .catch((error)=> {\n      console.info(error);\n    });\n  }\n}\n\nfunction LogOut() {\n  if(!window.confirm('ログアウトしますか？')){\n    return;\n  } else {\n    window.sessionStorage.setItem(['user_log_id'],[\"\"]);\n    window.confirm('ログアウトししました');\n    window.location = \"http://localhost:3000/\";\n    return;\n  }\n}\n\n\n//新規登録フォーム\nfunction SignUp(props) {\n  const fetchOption = {};\n  const headers = new Headers();\n  headers.append('Content-Type', 'text/plain');\n  headers.append('X-Custom-Header', 'custom-header');\n  headers.append('Content-Type', 'application/json;charset=utf-8');\n  headers.append('Access-Control-Allow-Origin', '*');\n  fetchOption[\"headers\"]= headers;\n  // console.log(fetchOption);\n\n  if (window.sessionStorage.getItem(['user_log_id']) === \"\") {\n    return (\n      <div>\n        <h2>新規登録</h2>\n        <div>\n          <label className=\"formLavel\">名前</label>\n          <input type=\"text\" value={props.signup_name} onChange={props.addFormName}/>\n        </div>\n        <div>\n          <label className=\"formLavel\">password</label>\n          <input type=\"text\" value={props.signup_password} onChange={props.addFormPassword}/>\n        </div>\n        <div>\n          <label className=\"formLavel\">メールアドレス</label>\n          <input type=\"text\" value={props.signup_email} onChange={props.addFormEmail}/>\n        </div>\n        <div>\n          <button type=\"submit\" onClick={(e) => PostUser(props)}>signUp</button> \n        </div>\n      </div>\n    );\n  } else {\n    return (\n      <button type=\"submit\" onClick={(e) => LogOut()}>サインアウト</button> \n    );\n  }\n}\n\n//ログインフォーム\n  function SignIn(props) {\n    if (window.sessionStorage.getItem(['user_log_id']) === \"\") {\n      return (\n        <div>\n        <h2>サインイン</h2>\n          <div>\n            <label className=\"formLavel\">ID</label>\n            <input type=\"text\" value={props.login_id} onChange={props.addLoginId}/>\n          </div>\n          <div>\n            <label className=\"formLavel\">password</label>\n            <input type=\"text\" value={props.login_password} onChange={props.addLoginPassword}/>\n          </div>\n          <div>\n            <button type=\"submit\" onClick={(e) => props.LoginUser(props)}>login</button> \n          </div>\n        </div>\n      );\n    } else {\n      return (\n        <p>ログインしています</p>\n      );\n    }\n  }\n\n\nclass UserLog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      signup_name: \"\",\n      signup_password: \"\",\n      signup_email: \"\",\n      login_id: \"\",\n      login_password: \"\",\n      user_get: []\n    };\n    this.addFormName = this.addFormName.bind(this);\n    this.addFormPassword = this.addFormPassword.bind(this);\n    this.addFormEmail = this.addFormEmail.bind(this);\n\n    this.addLoginId = this.addLoginId.bind(this);\n    this.addLoginPassword = this.addLoginPassword.bind(this);\n    this.LoginUser = this.LoginUser.bind(this);\n  }\n\n  LoginUser(props) {\n    const items = [props.login_id, props.login_password];\n    axios({\n      method : \"POST\",\n      url : \"http://localhost/user_judge\",\n      data : items\n    })\n    .then((response)=> {\n      const users = response.data;\n      console.log(users);\n\n      let login_user_num = 0;\n      for (let i = 0; i < users.length; i++) {\n        if (users[i].user_id === props.login_id) {\n          if (users[i].user_password === props.login_password) {\n            console.log(users[i].user_name);\n            console.log(\"がログインしました\");\n            window.sessionStorage.setItem(['user_log_id'],[props.login_id]);\n            window.confirm('ログインしました。');\n            window.location = \"http://localhost:3000/\";\n            return\n          }\n        }\n      }\n    })\n    .catch((error)=> {\n      console.info(error);\n    });\n  \n  }\n\n  addFormName(e){\n    this.setState({\n      signup_name: e.target.value\n    });\n  }\n  addFormPassword(e){\n    this.setState({\n      signup_password: e.target.value\n    });\n  }\n  addFormEmail(e){\n    this.setState({\n      signup_email: e.target.value\n    });\n  }\n  addLoginId(e){\n    this.setState({\n      login_id: e.target.value\n    });\n  }\n  addLoginPassword(e){\n    this.setState({\n      login_password: e.target.value\n    });\n  }\n\n\n  render(){\n    return(\n      <div className=\"form_div\">\n        <SignUp \n          signup_name={this.state.signup_name}\n          signup_password={this.state.signup_password}\n          signup_email={this.state.signup_email}\n\n          addFormName={this.addFormName}\n          addFormPassword={this.addFormPassword}\n          addFormEmail={this.addFormEmail}\n        />\n        <SignIn \n          login_id={this.state.login_id}\n          login_password={this.state.login_password}\n\n          addLoginId={this.addLoginId}\n          addLoginPassword={this.addLoginPassword}\n          LoginUser={this.LoginUser}\n        />\n      </div>\n    )\n  }\n\n}\n\nexport default UserLog;",{"ruleId":"72","replacedBy":"73"},{"ruleId":"74","replacedBy":"75"},{"ruleId":"76","severity":1,"message":"77","line":3,"column":8,"nodeType":"78","messageId":"79","endLine":3,"endColumn":16},{"ruleId":"72","replacedBy":"80"},{"ruleId":"74","replacedBy":"81"},{"ruleId":"76","severity":1,"message":"77","line":3,"column":8,"nodeType":"78","messageId":"79","endLine":3,"endColumn":16},{"ruleId":"72","replacedBy":"82"},{"ruleId":"74","replacedBy":"83"},{"ruleId":"72","replacedBy":"84"},{"ruleId":"74","replacedBy":"85"},{"ruleId":"76","severity":1,"message":"86","line":3,"column":3,"nodeType":"78","messageId":"79","endLine":3,"endColumn":12},{"ruleId":"76","severity":1,"message":"87","line":4,"column":3,"nodeType":"78","messageId":"79","endLine":4,"endColumn":13},{"ruleId":"76","severity":1,"message":"88","line":5,"column":3,"nodeType":"78","messageId":"79","endLine":5,"endColumn":14},{"ruleId":"76","severity":1,"message":"89","line":14,"column":9,"nodeType":"78","messageId":"79","endLine":14,"endColumn":15},{"ruleId":"76","severity":1,"message":"90","line":168,"column":11,"nodeType":"78","messageId":"79","endLine":168,"endColumn":25},"no-native-reassign",["91"],"no-negated-in-lhs",["92"],"no-unused-vars","'firebase' is defined but never used.","Identifier","unusedVar",["91"],["92"],["91"],["92"],["91"],["92"],"'useParams' is defined but never used.","'useHistory' is defined but never used.","'useLocation' is defined but never used.","'method' is assigned a value but never used.","'login_user_num' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]